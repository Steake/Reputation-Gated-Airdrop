import{o as p,s as n,a as f,n as r,p as T}from"./B2ztehUk.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"b1e593ae5130a8a866939fcd32d632e0f276c846"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="bd477025-b522-4934-9439-01ac3a827eee",e._sentryDebugIdIdentifier="sentry-dbid-bd477025-b522-4934-9439-01ac3a827eee")})()}catch{}const b=p({addr:n(),score1e6:r(),components:f(p({label:n(),delta:r()})).optional(),updatedAt:n().datetime()}),g=p({circuitId:n(),modelDigest:n(),inputDigest:n(),addr:n(),score:r(),deadline:r(),campaign:n(),sig:p({v:r(),r:n(),s:n()})}),_=p({score1e6:r(),calldata:n().regex(/^0x[0-9a-fA-F]*$/)}),d=T(),o="error"in d?void 0:d.API_BASE,y=!o;class m extends Error{constructor(t,a){super(t),this.status=a,this.name="ApiError"}}async function l(e,t,a){const i=await fetch(t,a);if(!i.ok)throw new m(`API request failed: ${i.statusText}`,i.status);const s=await i.json(),u=e.safeParse(s);if(!u.success)throw console.error("Zod validation error:",u.error),new m("Invalid API response shape");return u.data}function c(e){const a=e.slice(2,10).split("").reduce((i,s)=>i+s.charCodeAt(0),0)%8e5+15e4;return{addr:e,score1e6:a,updatedAt:new Date().toISOString(),components:[{label:"On-chain Activity",delta:a*.4},{label:"Social Graph",delta:a*.6}]}}function h(e,t){const{score1e6:a}=c(e);return{circuitId:"mock-circuit",modelDigest:"0x"+"a".repeat(64),inputDigest:"0x"+"b".repeat(64),addr:e,score:a,deadline:Math.floor(Date.now()/1e3)+3600,campaign:t,sig:{v:27,r:"0x"+"c".repeat(64),s:"0x"+"d".repeat(64)}}}function S(e){const{score1e6:t}=c(e);return{score1e6:t,calldata:"0x"+"f".repeat(128)}}async function w(e){return y?c(e):l(b,`${o}/scores/${e}`)}async function A(e,t){return y?h(e,t):l(g,`${o}/claim-artifact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({addr:e})})}async function P(e){return y?S(e):l(_,`${o}/proof-meta/${e}`)}const x=[{type:"constructor",inputs:[{name:"_token",type:"address",internalType:"contract IERC20"},{name:"_signer",type:"address",internalType:"address"},{name:"_campaign",type:"bytes32",internalType:"bytes32"},{name:"_floorScore",type:"uint256",internalType:"uint256"},{name:"_capScore",type:"uint256",internalType:"uint256"},{name:"_minPayout",type:"uint256",internalType:"uint256"},{name:"_maxPayout",type:"uint256",internalType:"uint256"},{name:"_curve",type:"uint8",internalType:"enum ReputationAirdropScaled.PayoutCurve"}]},{type:"function",name:"claim",inputs:[{name:"circuitId",type:"string",internalType:"string"},{name:"modelDigest",type:"bytes32",internalType:"bytes32"},{name:"inputDigest",type:"bytes32",internalType:"bytes32"},{name:"score",type:"uint256",internalType:"uint256"},{name:"deadline",type:"uint256",internalType:"uint256"},{name:"v",type:"uint8",internalType:"uint8"},{name:"r",type:"bytes32",internalType:"bytes32"},{name:"s",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"quotePayout",inputs:[{name:"score",type:"uint256",internalType:"uint256"}],outputs:[{name:"payout",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"claimed",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"pause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unpause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getPayoutParameters",inputs:[],outputs:[{name:"_floorScore",type:"uint256",internalType:"uint256"},{name:"_capScore",type:"uint256",internalType:"uint256"},{name:"_minPayout",type:"uint256",internalType:"uint256"},{name:"_maxPayout",type:"uint256",internalType:"uint256"},{name:"_curve",type:"uint8",internalType:"enum ReputationAirdropScaled.PayoutCurve"}],stateMutability:"view"},{type:"event",name:"Claimed",inputs:[{name:"user",type:"address",indexed:!0,internalType:"address"},{name:"score",type:"uint256",indexed:!1,internalType:"uint256"},{name:"payout",type:"uint256",indexed:!1,internalType:"uint256"},{name:"circuitId",type:"string",indexed:!1,internalType:"string"}],anonymous:!1}],M=[{type:"constructor",inputs:[{name:"_token",type:"address",internalType:"contract IERC20"},{name:"_zkVerifier",type:"address",internalType:"contract ZKMLOnChainVerifier"},{name:"_campaign",type:"bytes32",internalType:"bytes32"},{name:"_floorScore",type:"uint256",internalType:"uint256"},{name:"_capScore",type:"uint256",internalType:"uint256"},{name:"_minPayout",type:"uint256",internalType:"uint256"},{name:"_maxPayout",type:"uint256",internalType:"uint256"},{name:"_curve",type:"uint8",internalType:"enum ReputationAirdropZKScaled.PayoutCurve"},{name:"_maxReputationAge",type:"uint256",internalType:"uint256"}]},{type:"function",name:"claim",inputs:[{name:"proof",type:"bytes",internalType:"bytes"},{name:"score",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"quotePayout",inputs:[{name:"score",type:"uint256",internalType:"uint256"}],outputs:[{name:"payout",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"checkEligibility",inputs:[{name:"user",type:"address",internalType:"address"}],outputs:[{name:"eligible",type:"bool",internalType:"bool"},{name:"score",type:"uint256",internalType:"uint256"},{name:"payout",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"claimed",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"getZKParameters",inputs:[],outputs:[{name:"_zkVerifier",type:"address",internalType:"address"},{name:"_maxReputationAge",type:"uint256",internalType:"uint256"},{name:"_campaign",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"event",name:"Claimed",inputs:[{name:"user",type:"address",indexed:!0,internalType:"address"},{name:"score",type:"uint256",indexed:!1,internalType:"uint256"},{name:"payout",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}];export{x as a,P as b,A as c,w as g,M as r};
